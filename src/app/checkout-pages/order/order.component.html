<section [ngClass]="{'print': print}">
    <div class="banner" *ngIf="order.status==='Placed Order'">
        <h3>A few steps to place this order</h3>
        <ul>
            <li class="step active">
                <div>
                    <a>Shopping bag</a>
                </div>
            </li>
            <li class="step active">
                <div>
                    <a>Checkout</a>
                </div>
            </li>
            <li class="step active completed">
                <div>
                    <a>Place your order</a>
                </div>
            </li>
        </ul>
    </div>
    <div class="banner" *ngIf="order.status!=='Placed Order'&&order.status!=='Canceled'">
        <h3>A few steps to complete this order</h3>
        <ul>
            <li class="step active">
                <div>
                    <a>Order Placed</a>
                </div>
            </li>
            <li class="step active">
                <div>
                    <a>Processing Order</a>
                </div>
            </li>
            <li class="step">
                <div>
                    <a>Delivered</a>
                </div>
            </li>

        </ul>
    </div>
    <div class="loader-overlay" [ngClass]="{'hidden': !loading}">
        <span class="loader"><span class="loader-inner"></span></span>
    </div>
    <div class="body" id="invoice" *ngIf="!error&&order">
        <div class="header" *ngIf="order.status==='Placed Order'">
            <div class="text-center">
                <div class="info-right text-right">
                    <button class="nextBtn" (click)="cancelModal=true">Cancel Order</button>
                </div>
                <h2 *ngIf="!print">Thanks</h2>
                <div class="text-center" *ngIf="print">
                    <br>
                    <br>
                    <br>
                    <img src="assets/images/logo.png" alt=" " class="logo">
                </div>
                <p class="order-id"> Order No*: <span class="strong">{{order.id | uppercase}}</span> </p>
                <p class="text-center small">Your order has been placed successfully. <br> When we receive your payment, we will wrap up your stuff for shipping.
                </p>
                <br>
            </div>
        </div>
        <div class="header" *ngIf="order.status!=='Placed Order'">
            <h2 class="text-center" *ngIf="!print">Thanks</h2>
            <div class="text-center" *ngIf="print">
                <img src="assets/images/logo.png" alt=" " class="logo">
                <br>
                <br>
            </div>
            <p class="order-id text-center">Your order has been successfully <span class="strong">{{order.status}}</span> .
                <br> For your reference, here's a summary of your order.
            </p>
            <br>
        </div>
        <div class="container">
            <div class="flex bg">
                <div class="full info">
                    <p class="order-info"><span>Username:</span>
                        <span>{{order.billing.username | uppercase}}</span> </p>
                    <p class="order-info">
                        <span>Phone:</span><span>{{order.billing.areacode}}-{{order.billing.phone}}</span></p>
                    <p class="order-info"><span>Email:</span><span> {{order.billing.email}}</span></p>

                    <p class="order-info">
                        <span>Address:</span>
                        <span>{{order.billing.building}}, <br>
              {{order.billing.street}}, {{order.billing.district}},<br>{{order.billing.city}}</span>
                    </p>
                    <p class="order-info">
                        <span>Customer Note:</span>
                        <span> <i *ngIf="order.comment">{{order.comment}}</i><i *ngIf="!order.comment">None</i> </span>
                    </p>
                </div>
                <div class="full">
                    <p class="order-info"> <span>Order No </span><span>{{order.id| uppercase}}</span></p>
                    <p class="order-info"> <span>Order Date </span><span> {{order.created_at}}</span></p>
                    <p class="order-info"> <span>Order Status </span><span class="bg"> {{order.status}}</span></p>
                    <p class="order-info"> <span>Payment </span>
                        <span>{{order.payment.paymentMethod}}</span> -
                        <span class="bg"> {{order.payment.status}}</span>
                    </p>
                    <p *ngIf="order.payment.transaction_id" class="order-info">
                        <span>Transaction ID:</span>
                        <span> {{order.payment.transaction_id}}</span>
                    </p>
                    <p class="order-info">
                        <span>Shipping Method </span>
                        <span>{{order.delivery.deliveryMethod}}</span> <br>
                        <span>{{order.delivery.status}}</span> <br>
                        <span>{{order.delivery.date}}</span>
                    </p>
                </div>

            </div>
        </div>
        <div class="container ">
            <div class="flex" *ngFor="let item of order.orderItems">
                <div class="four">
                    <img src="https://www.enjoybag.com.hk/photo/{{item.product.sku}}_1_s.jpg" alt="">
                </div>
                <div class="four">
                    <p>{{item.product.name}}</p>
                    <span class="small">#{{item.product.sku}}</span>
                    <span class="small">Color: {{item.product.color}}</span>
                </div>
                <div class="four">
                    <p class="text-center">Qty: {{item.qty}}</p>
                </div>
                <div class="four">
                    <p class="text-right" [ngClass]="{'del': item.product.dis>0}">{{item.product.price | currency:userCurrency}}
                    </p>
                    <p class="text-right" *ngIf="item.product.dis>0">{{item.product.dis|currency:userCurrency}}</p>
                </div>
            </div>
            <div class="flex total">
                <div class=" text-right">
                    <span class="small"> Total Items ({{order.orderItems.length}}) :</span>
                    <span class="small" *ngIf="order.bonus>0||order.discount!=''"> Bonus/Discount :</span>
                    <span class="small"> Tax : </span>
                    <span class="small"> Shipping :</span>
                    <h4> Total : </h4>
                </div>
                <div class="text-right">
                    <span class="small">{{order.subtotal | currency:userCurrency}}</span>
                    <span class="small" *ngIf="order.bonus>0||order.discount!=''">
            <span *ngIf="order.bonus">- {{order.bonus | currency:userCurrency}}</span>
                    <span class="small" *ngIf="order.discount">{{order.discount}} Off</span>
                    </span>
                    <span class="small"> {{order.tax | currency:userCurrency}} </span>
                    <span class="small"> {{order.shipping | currency:userCurrency}} </span>
                    <h4> {{order.total | currency:userCurrency}} </h4>
                </div>
            </div>
            <div class="header text-center btn" *ngIf="order.status==='Placed Order'">
                <a class="nextBtn crimson" [routerLink]="['/en/home']">Continue Shopping</a>
                <a *ngIf="logined" class="nextBtn" [routerLink]="['/en/myEnjoybag']">View Account</a>
            </div>
            <div class="header text-center btn" *ngIf="order.status!=='Placed Order'">
                <button class="nextBtn crimson" (click)="printInvoice()">Print Receipt</button>
            </div>
            <p class="small ">Ref No*: EW0000352</p>
        </div>
    </div>
    <div class="body" *ngIf="error">
        <div class="container">
            <p class="order-id text-center">
                <br><br> Sorry, this order doesn't exist.
                <br><br>
            </p>
        </div>
    </div>
    <div class="footer text-center">
        <h3>Need Help ?</h3>
        <br>
        <p>For any further infos, please <a [routerLink]="['/en/FAQ']" fragment="Contact" href="en/FAQ#contact">Contact
        Us</a>.</p>
    </div>
    <router-outlet name="invoice"></router-outlet>
</section>
<div class="modal" *ngIf="cancelModal">
    <div class="modal-body">
        <h3>Cancel Your Order ?</h3>
        <div class="form">
            <div>
                <p>Reasons for cancellation ( Optional ):</p>
                <div class="radio">
                    <input id="radio-1" name="radio" type="radio" value="Changed my mind" (change)="reasonChange('Changed my mind')">
                    <label for="radio-1" class="radio-label">Changed my mind</label>
                </div>
                <div class="radio">
                    <input id="radio-2" name="radio" type="radio" value="Wrong shipping address" (change)="reasonChange(' Wrong shipping address ')">
                    <label for="radio-2" class="radio-label">Wrong shipping address</label>
                </div>
                <div class="radio">
                    <input id="radio-3" name="radio" type="radio" value="Duplicate order" (change)="reasonChange(' Duplicate order')">
                    <label for="radio-3" class="radio-label">Duplicate order</label>
                </div>
                <div class="radio">
                    <input id="radio-4" name="radio" type="radio" value="Others" (change)="reasonChange(' Others')">
                    <label for="radio-4" class="radio-label">Others</label>
                </div>
            </div>
            <div>
                <p>Additional comments:</p>
                <input type="text">
                <div class="text-center">
                    <button class="nextBtn crimson" (click)="cancelModal=false">Keep Order</button>
                    <button class="nextBtn" (click)="cancelOrder(order.id)">Yes, Cancel Order</button>
                </div>
            </div>
        </div>
    </div>
</div>